##############################################################################
#####                                                                    #####
#####                      Preseeding Debian Installer                   #####
#####                                                                    #####
#####                                 Wheezy                             #####
#####                                                                    #####
##############################################################################

##############################################################################
#####      http://d-i.alioth.debian.org/manual/en.i386/apbs04.html       #####
##############################################################################

#-----------------------------------------------------------------------------
# Debian - The Universel Operating System
# Installer boot menu
# Install
#-----------------------------------------------------------------------------

#-----------------------------------------------------------------------------
# Paramètres de boot avec le CD netinstall de Debian stable
# cf https://github.com/fgarel/myDebianInstall01
#-----------------------------------------------------------------------------
# auto interface=eth0
#       mirror/http/proxy=http://10.2.10.6:3128/
#       http_proxy=http://10.2.10.6:3128/
#       url=fgarel.ovh.org
#
# auto interface=eth1
#       url=fgarel.ovh.org
#
# auto url=fgarel.ovh.org
#-----------------------------------------------------------------------------

##############################################################################
####  menu item    = cdebconf-priority                                    ####
####  menu english = Change debconf priority                              ####
####  menu french  = Changer la priorite des questions de configuration   ####
####  doc          =                                                      ####
##############################################################################
#-----------------------------------------------------------------------------
# Changer la priorite des questions de configuration
# Ignorer les questions de priorites inferieure a :
# low
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     debconf/priority                                   string critical
#d-i    debconf/priority                                   string high
#d-i    debconf/priority                                   string medium
#d-i    debconf/priority                                   string low

##############################################################################
####  menu item    = localchooser                                         ####
####  menu english = Choose language                                      ####
####  menu french  = Choisir la langue                                    ####
####  doc          = B.4.1. Localization                                  ####
##############################################################################
#-----------------------------------------------------------------------------
# Select a language / Choix de la langue
# Language :
# French - Francais
#-----------------------------------------------------------------------------
#       |                                                  |      |           
debconf debconf/language                                   string fr
d-i     debconf/language                                   string fr
d-i     debian-installer/language                          string fr

#-----------------------------------------------------------------------------
# Choix de votre situation geographique
# Pays (territoire ou region) :
# France
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     debian-installer/country                           string FR

#-----------------------------------------------------------------------------
# Choix des parametres regionaux ("locales")
# Pays qui servira de base aux parametres regionaux par defaut :
# France - fr_FR.UTF-8
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     debian-installer/locale                            string fr_FR.UTF-8

#-----------------------------------------------------------------------------
# Choix des parametres regionaux ("locales")
# Parametres regionaux supplementaires :
# br_FR.UTF-8, en_US.UTF-8
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     debian-installer/supported-locales                 string br_FR.UTF-8, en_US.UTF-8

#-----------------------------------------------------------------------------
# Choix des parametres regionaux ("locales")
# Parametres regionaux ("locale") du systeme :
# fr_FR.UTF-8
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     debian-installer/locale                            string fr_FR.UTF-8

##############################################################################
####  menu item    = console-setup-udeb                                   ####
####  menu english = Configure the keyboard                               ####
####  menu french  = Configurer le clavier                                ####
####  doc          = B.4.1. Localization                                  ####
##############################################################################
#-----------------------------------------------------------------------------
# Configurer le clavier
# Disposition de clavier a utiliser :
# Francais
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     keyboard-configuration/xkb-keymap                  select fr
d-i     keyboard-configuration/layoutcode                  string fr
#d-i    keyboard-configuration/variantcode                 string nodeadkeys
#d-i    console-tools/archs                                string skip-config
#d-i    console-keymaps-at/keymap                          select fr
#d-i    keyboard-configuration/layout                      select 
#d-i    keyboard-configuration/variant                     select 
#d-i    console-tools/archs                                string skip-config
#d-i    console-tools/archs                                select at

#-----------------------------------------------------------------------------
# Choisir la disposition du clavier
# Carte de clavier a utiliser :
# Francais (fr-latin9)
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#d-i    console-setup/layout                               select France
#d-i    console-setup/layoutcode                           string fr
#d-i    console-tools/archs                                select at
#d-i    console-keymaps-at/keymap                          select fr
# Example for a different keyboard architecture
#d-i    console-keymaps-usb/keymap                         select mac-usb-us

##############################################################################
####  menu item    = netcfg                                               ####
####  menu english = Configure the network                                ####
####  menu french  = Configurer le reseau                                 ####
####  doc          = B.4.2. Network configuration                         ####
##############################################################################
#-----------------------------------------------------------------------------
# Configurer le resau
# Interface reseau principale :
# eth0
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# netcfg will choose an interface that has link if possible. This makes it
# skip displaying a list if there is more than one interface.
d-i     netcfg/choose_interface                            select auto
# To pick a particular interface instead:
#d-i    netcfg/choose_interface                            select eth0

#-----------------------------------------------------------------------------
# Configurer le resau
# Nom de la machine :
# tux11
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     netcfg/get_hostname                                string tux11

#-----------------------------------------------------------------------------
# Configurer le resau
# Domaine :
# mairie.fr
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     netcfg/get_domain                                  string mairie.fr
#d-i    netcfg/get_domain                                  string unassigned-domain

##############################################################################
####  menu item    = network-console                                      ####
####  menu english = Continue installation remotely by SSH                ####
####  menu french  = Poursuivre l'installation a distance par SSH         ####
####  doc          = B.4.3. Network console                               ####
##############################################################################
#-----------------------------------------------------------------------------
# Poursuivre l'installation a distance par SSH
# Mot de passe d'installation a distance :
# r00tme
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Use the following settings if you wish to make use of the network-console
# component for remote installation over SSH. This only makes sense if you
# intend to perform the remainder of the installation manually.
#d-i    anna/choose_modules                                string network-console
#d-i    network-console/password                           password r00tme
#d-i    network-console/password-again                     password r00tme

#-----------------------------------------------------------------------------
# Poursuivre l'installation a distance par SSH
# Confirmation du mot de passe :
# r00tme
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#d-i    network-console/password-again                     password r00tme

##############################################################################
####  menu item    = choose-mirror                                        ####
####  menu english = Choose a mirror of the Debian archive                ####
####  menu french  = Choisir un miroir de l'archive Debian                ####
####  doc          = B.4.4. Mirror settings                               ####
##############################################################################
#-----------------------------------------------------------------------------
# Choisir un miroir de l'archive Debian
# Pays du miroir de l'archive Debian :
# France
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#d-i    mirror/country                                     string fr
d-i     mirror/country                                     string manual

#-----------------------------------------------------------------------------
# Choisir un miroir de l'archive Debian
# Miroir de l'archive Debian :
# ftp.fr.debian.org
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     mirror/http/hostname                               string ftp.fr.debian.org
d-i     mirror/http/directory                              string /debian/

#-----------------------------------------------------------------------------
# Choisir un miroir de l'archive Debian
# Mandataire HTTP (laisser vide si aucun) :
#
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#d-i    mirror/http/proxy                                  string
#d-i    mirror/http/proxy                                  string http://10.5.10.24:3128/

##############################################################################
####  menu item    = user-setup-udeb                                      ####
####  menu english = Set up users and passwords                           ####
####  menu french  = Creer les utilisateurs et choisir les mots de passe  ####
####  doc          = B.4.8. Account setup                                 ####
##############################################################################
####  root                                                                ####
##############################################################################
# Skip creation of a root account (normal user account will be able to
# use sudo).
#d-i    passwd/root-login                                  boolean false

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Mot de passe du superutilisateur ("root") :
# .....
#-----------------------------------------------------------------------------
#       |                                                  |      |           

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Confirmation du mot de passe :
# .....
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Root password, either in clear text
#d-i    passwd/root-password                               password r00tme
#d-i    passwd/root-password-again                         password r00tme
# or encrypted using an MD5 hash.
#
# hack vu sur www.debian.org/releases/stable/i386/apbs04.html.en
#The following command can be used to generate an MD5 hash for a password:
#$ printf "r00tme" | mkpasswd -s -m md5
#
d-i     passwd/root-password-crypted                       password $1$vsxJVKC4$U4eCSdCF.g1d5bzpGeKLJ.

##############################################################################
####  normal user account                                                 ####
##############################################################################
# Alternatively, to skip creation of a normal user account.
#d-i    passwd/make-user boolean false

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Nom complet du nouvel utilisateur :
# Blue Flamingo
# Garel Frederic
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# To create a normal user account.
d-i     passwd/user-fullname                               string Blue Flamingo
#d-i     passwd/user-fullname                               string Frederic Garel
#d-i    passwd/user-fullname                               seen false

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Identifiant pour le compte utilisateur :
# blueflamingo
# garel
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     passwd/username                                    string blueflamingo
#d-i     passwd/username                                    string garel
#d-i    passwd/username                                    seen false

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Mot de passe pour le nouvel utilisateur :
# .....
#-----------------------------------------------------------------------------
#       |                                                  |      |           

#-----------------------------------------------------------------------------
# Creer les utilisateurs et choisir les mots de passe
# Confirmation du mot de passe :
# .....
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Normal user's password, either in clear text
#d-i    passwd/user-password password insecure
#d-i    passwd/user-password-again password insecure
# or encrypted using an MD5 hash.
# hack vu sur www.debian.org/releases/stable/i386/apbs04.html.en
# pour créer ce hash, il faut utiliser cette ligne de commande
#$ printf "r00tme" | mkpasswd -s -m md5
d-i     passwd/user-password-crypted                       password $1$i35q4Vuk$MryB8lTy2mBkgqSh6oKuu/
#d-i     passwd/user-password-crypted                       password $1$HSxpPm89$rG3yF0.lgY04IBd6i1ElN.

# Create the first user with the specified UID instead of the default.
#d-i    passwd/user-uid                                    string 1010

# The user account will be added to some standard initial groups. To
# override that, use this.
#d-i    passwd/user-default-groups                         string audio cdrom video

##############################################################################
####  menu item    = partman                                              ####
####  menu english = Partition disks                                      ####
####  menu french  = Partitionner les disques                             ####
####  doc          = B.4.6. Partitioning                                  ####
##############################################################################
# If the system has free space you can choose to only partition that space.
#d-i    partman-auto/init_automatically_partition select biggest_free

#-----------------------------------------------------------------------------
# Partitionner les disques
# Disque a partitionner :
# SCSI1 (0,0,0) (sda) - 40.0 GB ATA ST340014A
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# You can specify a disk to partition. The device name must
# be given in traditional non-devfs format.
# Note: A disk must be specified, unless the system has only one disk.
# For example, to use the first SCSI/SATA hard disk:
#d-i    partman-auto/disk                                  string /dev/sda
d-i     partman-auto/disk                                  string /dev/sda

#-----------------------------------------------------------------------------
# Partitionner les disques
# Methode partitionnement :
# Assiste - utiliser tout un disque avec LVM
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# You'll need to specify the method to use.
# The presently available methods are: "regular", "lvm" and "crypto"
#d-i    partman-auto/method                                string regular
d-i     partman-auto/method                                string lvm
#d-i    partman-auto/method                                seen false
# selection de l'option "Partionnement assiste - utiliser tout un disque"
#d-i    partman-auto/init_automatically_partition          select Guided - use entire disk
# selection de l'option "Partionnement assiste - utiliser tout un disque avec LVM"
#d-i    partman-auto/init_automatically_partition          select Guided - use entire disk and set up LVM
d-i     partman-auto/init_automaticaly_Partition           select Partionnement assiste - utiliser tout un disque avec LVM
#d-i    partman-auto/init_automatically_partition          seen false

#-----------------------------------------------------------------------------
# Partitionner les disques
# Ecrire les modifications sur les disques et configurer LVM ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#d-i    partman-lvm/confirm                                boolean true

#-----------------------------------------------------------------------------
# Partitionner les disques
# Faut-il supprimer les donnees des volumes logiques existants ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# If one of the disks that are going to be automatically partitioned
# contains an old LVM configuration, the user will normally receive a
# warning. This can be preseeded away...
d-i     partman-lvm/device_remove_lvm                      boolean true
# The same applies to pre-existing software RAID array:
d-i     partman-md/device_remove_md                        boolean true

#-----------------------------------------------------------------------------
# Partitionner les disques
# Ecrire les modifications sur les disques et configurer LVM ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# And the same goes for the confirmation to write the lvm partitions.
d-i     partman-lvm/confirm                                boolean true
d-i     partman-lvm/confirm_nooverwrite                    boolean true

#-----------------------------------------------------------------------------
# Partitionner les disques
# Nom du groupe de volumes pour le nouveau systeme :
# debian
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# This makes partman automatically partition without confirmation, provided
# that you told it what to do using one of the methods above.
d-i     partman/confirm_write_new_label                    boolean true
d-i     partman_auto_lvm/new_vg_name                       string debian

#-----------------------------------------------------------------------------
# Partitionner les disques
# Schema de partitionnement :
# Partitions /home, /usr, /var et /tmp separees
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# You can choose one of the three predefined partitioning recipes:
# - atomic: all files in one partition
# - home:   separate /home partition
# - multi:  separate /home, /usr, /var, and /tmp partitions
#d-i    partman-auto/choose_recipe                         select atomic
#d-i    partman-auto/choose_recipe                         select home
d-i     partman-auto/choose_recipe                         select multi

# Or provide a recipe of your own...
# The recipe format is documented in the file devel/partman-auto-recipe.txt.
# If you have a way to get a recipe file into the d-i environment, you can
# just point at it.
#d-i    partman-auto/expert_recipe_file                    string /hd-media/recipe

# If not, you can put an entire recipe into the preconfiguration file in one
# (logical) line. This example creates a small /boot partition, suitable
# swap, and uses the rest of the space for the root partition:
#d-i    partman-auto/expert_recipe string                      \
#       boot-root ::                                           \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

#-----------------------------------------------------------------------------
# Partitionner les disques
# Terminer le partitionnement et appliquer les changements
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# This makes partman automatically partition without confirmation, provided
# that you told it what to do using one of the methods above.
#d-i    partman/confirm_write_new_label                    boolean true
d-i     partman/choose_partition                           select Finish partitioning and write changes to disk
#d-i    partman/choose_partition                           select Terminer le partitionnement et appliquer les changements

#-----------------------------------------------------------------------------
# Partitionner les disques
# Faut-il appliquer les changements sur les disques ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
d-i     partman/confirm                                    boolean true
d-i     partman/confirm_nooverwrite                        boolean true

##############################################################################
####  menu item    = bootstrap-base                                       ####
####  menu english = Install the base system                              ####
####  menu french  = Installer le systeme de base                         ####
####  doc          = B.4.7. Base system installation                      ####
##############################################################################
# Configure APT to not install recommended packages by default. Use of this
# option can result in an incomplete system and should only be used by very
# experienced users.
#d-i    base-installer/install-recommends                  boolean false

# Select the initramfs generator used to generate the initrd for 2.6 kernels.
#d-i    base-installer/kernel/linux/initramfs-generators string yaird

#-----------------------------------------------------------------------------
# Installer le systeme de base
# Noyau a installer :
# linux-image-686-pae
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# The kernel image (meta) package to be installed; "none" can be used if no
# kernel is to be installed.
#d-i    base-installer/kernel/image                        string linux-image-2.6-486
d-i     base-installer/kernel/image                        string linux-image-686-pae

#-----------------------------------------------------------------------------
# Installer le systeme de base
# Pilotes a inclure sur l'image disque en memoire ("initrd") :
# image-generique : comporte tous les pilotes disponibles
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# les choix possibles sont :
# image-generique : comporte tous les pilotes disponibles
# image-ciblee : seulement les pilotes necessaires pour ce systeme

##############################################################################
####  menu item    = apt-setup-udev                                       ####
####  menu english = Configure the package manager                        ####
####  menu french  = Configurer l'outil de gestion des paquets            ####
####  doc          =                                                      ####
##############################################################################
#-----------------------------------------------------------------------------
# Configurer l'outil de gestion des paquets
# Souhaitez-vous utiliser des logiciels non-libres ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           

#-----------------------------------------------------------------------------
# Configurer l'outil de gestion des paquets
# Services a utiliser :
#   mises a jour de securite (security.debian.org)
#   mises a jour de la publication
#-----------------------------------------------------------------------------
#       |                                                  |      |           
apt-setup-udev apt-setup/services-select                   multiselect security, updates

##############################################################################
####  menu item    = pkgsel                                               ####
####  menu english = Select and install software                          ####
####  menu french  = Choisir et installer des logiciels                   ####
####  doc          = B.4.10. Package selection                            ####
##############################################################################
#-----------------------------------------------------------------------------
# Configuration de popularity-contest
# Souhaitez-vous participer a l'etude statistique sur l'utilisation des paquets ?
# Non
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Some versions of the installer can report back on what software you have
# installed, and what software you use. The default is not to report back,
# but sending reports helps the project determine what software is most
# popular and include it on CDs.
popularity-contest popularity-contest/participate          boolean false

#-----------------------------------------------------------------------------
# Selection des logiciels
# Logiciels a installer :
#   Environnement graphique de bureau
#   Serveur web
#   Serveur d'impression
#   Serveur DNS
#   Serveur de fichiers
#   Serveur de courrier
#   Bases de donnees SQL
#   Serveur SSH
#   Ordinateur portable
#   Utilitaires standard du systeme
# Continuer
#-----------------------------------------------------------------------------
#       |                                                  |      |           
#tasksel tasksel/first                                     multiselect standard, web-server
# we don't want any tasks
tasksel tasksel/first                                      multiselect
# If the desktop task is selected, install the kde and xfce desktops
# instead of the default gnome desktop.
#tasksel tasksel/desktop                                   multiselect kde, xfce


# Individual additional packages to install
#d-i    pkgsel/include                                     string openssh-server build-essential rsync less sudo cron-apt ntp host debsums devscripts pciutils ethtool
#d-i     pkgsel/include                                     string openssh-server build-essential git-core
#d-i     pkgsel/include                                     string apache2.2-bin apache2 apache2-mpm-worker libapache2-mod-ldap-userdir imagemagick libmagickcore5-extra unixodbc mysql-common postgresql-9.1 postgresql-common postgresql-client-9.1 postgresql-client-common postgresql-server-dev-9.1 libxml2-utils xsltproc libjson0-dev dblatex texlive docbook-xsl trac trac-git cups cups-pdf sudo ack-grep hwinfo ncurses-term ncdu bzip2 p7zip-full unzip make build-essential devscripts fakeroot flex bison libreadline-dev autoconf automake libtool lsb-release mlocate tmux openssh-server git subversion subversion-tools curl etckeeper elinks zsh
#d-i     pkgsel/include                                     string apache2.2-bin apache2 apache2-mpm-worker libapache2-mod-ldap-userdir imagemagick libmagickcore5-extra unixodbc mysql-common cups cups-pdf libtool lsb-release mlocate tmux openssh-server git subversion subversion-tools curl etckeeper zsh
d-i     pkgsel/include                                     string openssh-server git sudo ack-grep hwinfo ncurses-term ncdu bzip2 p7zip-full unzip make build-essential fakeroot flex bison libreadline-dev autoconf automake libtool lsb-release mlocate tmux subversion apache2 subversion-tools curl #etckeeper elinks zsh
# apache2.2-bin apache2 apache2-mpm-worker libapache2-mod-ldap-userdir imagemagick libmagickcore5-extra unixodbc mysql-common 
# postgresql-9.1 postgresql-common postgresql-client-9.1 postgresql-client-common postgresql-server-dev-9.1 
# libxml2-utils xsltproc libjson0-dev dblatex texlive docbook-xsl trac trac-git cups cups-pdf devscripts libreadline-dev 
#devscripts

# Whether to upgrade packages after debootstrap.
# Allowed values: none, safe-upgrade, full-upgrade
#d-i    pkgsel/upgrade                                     select none
#d-i    pkgsel/upgrade                                     select safe-upgrade
#d-i    pkgsel/upgrade                                     select full-upgrade
d-i     pkgsel/upgrade                                     select full-upgrade

##############################################################################
####  menu item    =                                                      ####
####  menu english =                                                      ####
####  menu french  =                                                      ####
####  doc          = B.4.13. Preseeding other packages                    ####
##############################################################################

##############################################################################
####  menu item    =                                                      ####
####  menu english =                                                      ####
####  menu french  =                                                      ####
####  doc          = B.5.1. Running custom commands during the installat. ####
##############################################################################
# d-i preseeding is inherently not secure. Nothing in the installer checks
# for attempts at buffer overflows or other exploits of the values of a
# preconfiguration file like this one. Only use preconfiguration files from
# trusted locations! To drive that home, and because it's generally useful,
# here's a way to run any shell command you'd like inside the installer,
# automatically.

# This first command is run as early as possible, just after
# preseeding is read.
#d-i    preseed/early_command                              string anna-install some-udeb

# This command is run immediately before the partitioner starts. It may be
# useful to apply dynamic partitioner preseeding that depends on the state
# of the disks (which may not be visible when preseed/early_command runs).
#d-i    partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"

# This command is run just before the install finishes, but when there is
# still a usable /target directory. You can chroot to /target and use it
# directly, or use the apt-install and in-target commands to easily install
# packages and run commands in the target system.
#d-i    preseed/late_command                               string apt-install zsh; in-target chsh -s /bin/zsh
#d-i    preseed/late_command                               string in-target update-alternatives --set editor /usr/bin/vim.tiny;echo "taggart  ALL=(ALL) ALL">>/target/etc/sudoers;sync

# la ligne ci-dessous ne fonctionne pas
#d-i    preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDjangoProject01.git myDjangoProject01;cp myDjangoProject01/README /usr/sbin/

# la ligne ci-dessous fonctionne
#d-i    preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDjangoProject01.git myDjangoProject01
#d-i    preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDjangoProject01.git myDjangoProject01;cp /target/myDjangoProject01/README /target/usr/bin
#d-i    preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDebianInstall01.git /root/myDebianInstall01; cp /target/root/myDebianInstall01/usr/sbin/fg-git-fetch.sh /target/usr/sbin; chroot /target fg-git-fetch.sh

# la ligne ci-dessous est la derniere version
# recuperation des fichiers depuis le depot git, recopie au bon endroit, puis enfin, execution du script
#d-i     preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDebianInstall01.git /root/myDebianInstall01; cp /target/root/myDebianInstall01/usr/sbin/fg-git-fetch.sh /target/usr/sbin; chroot /target fg-git-fetch.sh
d-i     preseed/late_command                               string in-target git clone --progress --verbose http://github.com/fgarel/myDebianInstall01.git /root/myDebianInstall01; cp /target/root/myDebianInstall01/usr/sbin/fggitfetch-preseed.sh /target/usr/sbin; chroot /target fggitfetch-preseed.sh


##############################################################################
####  menu item    = grub-installer                                       ####
####  menu english = Install the grub boot loader on a hard disk          ####
####  menu french  = Installer le programme de demarrage GRUB sur un DD   ####
####  doc          = B.4.11. Boot loader installation                     ####
##############################################################################
#-----------------------------------------------------------------------------
# Installer le programme de demarrage GRUB sur un disque dur
# Installer le programme de demarrage GRUB sur le secteur d'amorcage ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Grub is the default boot loader (for x86). If you want lilo installed
# instead, uncomment this:
#d-i    grub-installer/skip                                boolean true
# To also skip installing lilo, and install no bootloader, uncomment this
# too:
#d-i    lilo-installer/skip                                boolean true

# With a few exceptions for unusual partitioning setups, GRUB 2 is now the
# default. If you need GRUB Legacy for some particular reason, then
# uncomment this:
#d-i    grub-installer/grub2_instead_of_grub_legacy        boolean false

# This is fairly safe to set, it makes grub install automatically to the MBR
# if no other operating system is detected on the machine.
#d-i    grub-installer/only_debian                         boolean true

# This one makes grub-installer install to the MBR if it also finds some other
# OS, which is less safe as it might not be able to boot that other OS.
d-i     grub-installer/with_other_os                       boolean true

# Alternatively, if you want to install to a location other than the mbr,
# uncomment and edit these lines:
#d-i    grub-installer/only_debian                         boolean false
#d-i    grub-installer/with_other_os                       boolean false
#d-i    grub-installer/bootdev                             string (hd0,0)
# To install grub to multiple disks:
#d-i    grub-installer/bootdev                             string (hd0,0) (hd1,0) (hd2,0)

# Optional password for grub, either in clear text
#d-i    grub-installer/password                            password r00tme
#d-i    grub-installer/password-again                      password r00tme
# or encrypted using an MD5 hash, see grub-md5-crypt(8).
#d-i    grub-installer/password-crypted                    password [MD5 hash]

# Use the following option to add additional boot parameters for the
# installed system (if supported by the bootloader installer).
# Note: options passed to the installer will be added automatically.
#d-i    debian-installer/add-kernel-opts                   string nousb

##############################################################################
####  menu item    = clock-setup                                          ####
####  menu english = Configure the clock                                  ####
####  menu french  = Configurer l'horloge                                 ####
####  doc          = B.4.5. Clock and time zone setup                     ####
##############################################################################
#-----------------------------------------------------------------------------
# Terminer l'installation
# L'horloge systeme est-elle a l'heure universelle (UTC) ?
# Oui
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Controls whether or not the hardware clock is set to UTC.
d-i     clock-setup/utc                                    boolean true
# You may set this to any valid setting for $TZ; see the contents of
# /usr/share/zoneinfo/ for valid values.
d-i     time/zone                                          string Europe/Paris

# Controls whether to use NTP to set the clock during the install
d-i     clock-setup/ntp                                    boolean true
# NTP server to use. The default is almost always fine here.
d-i     clock-setup/ntp-server                             string 0.fr.pool.ntp.org
d-i     clock-setup/ntp-server                             string 1.fr.pool.ntp.org
d-i     clock-setup/ntp-server                             string 2.fr.pool.ntp.org
d-i     clock-setup/ntp-server                             string 3.fr.pool.ntp.org

##############################################################################
####  menu item    = finish-install                                       ####
####  menu english = Finish the installation                              ####
####  menu french  = Terminer l'installation                              ####
####  doc          = B.4.12. Finishing up the installation                ####
##############################################################################
#-----------------------------------------------------------------------------
# Terminer l'installation
# Installation termine
# Continuer
#-----------------------------------------------------------------------------
#       |                                                  |      |           
# Avoid that last message about the install being complete.
d-i     finish-install/reboot_in_progress                  note

# This will prevent the installer from ejecting the CD during the reboot,
# which is useful in some situations.
#d-i    cdrom-detect/eject boolean false

# This is how to make the installer shutdown when finished, but not
# reboot into the installed system.
#d-i    debian-installer/exit/halt                         boolean true

# This will power off the machine instead of just halting it.
#d-i    debian-installer/exit/poweroff                     boolean true





##############################################################################
#### First boot after install                                             ####
##############################################################################

# login : root
# password
# echo y | aptitude install git

# git clone --progress --verbose http://github.com/fgarel/myDebianInstall01.git myDebianInstall01

# cp myDebianInstall01/usr/sbin/fggitfetch-preseed.sh /usr/sbin/

# nano myDebianInstall01/usr/sbin/fgaptitudedoall.sh

apache2.2-bin apache2 apache2-mpm-worker libapache2-mod-ldap-userdir imagemagick libmagickcore5-extra unixodbc mysql-common postgresql-9.1 postgresql-common postgresql-client-9.1 postgresql-client-common postgresql-server-dev-9.1 libxml2-utils xsltproc libjson0-dev dblatex texlive docbook-xsl trac trac-git cups cups-pdf sudo ack-grep hwinfo ncurses-term ncdu bzip2 p7zip-full unzip make build-essential devscripts fakeroot flex bison libreadline-dev autoconf automake libtool lsb-release mlocate tmux openssh-server git subversion subversion-tools curl etckeeper elinks zsh
